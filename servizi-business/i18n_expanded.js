// INTERNATIONAL TRANSLATIONS - EXPANDED VERSION
// Full translations for all calculators

const TRANSLATIONS = {
    it: {
        // Header & Navigation
        home: "Home",
        features: "Funzionalità",
        tools: "Strumenti",
        login: "Accedi",
        register: "Registrati",
        logout: "Esci",
        
        // Common
        calculate: "Calcola",
        reset: "Reset",
        copyResults: "Copia Risultati",
        copied: "Copiato!",
        download: "Scarica",
        
        // Salary Calculator
        salaryCalc: "Calcolo Stipendio Netto",
        salaryCalcDesc: "Scopri quanto guadagnerai al netto delle trattenute",
        grossSalaryLabel: "Stipendio Lordo Annuo (€)",
        grossSalaryHint: "RAL (Retribuzione Annua Lorda)",
        familyDeductions: "Detrazioni Familiari",
        noDeductions: "Nessuna (Single)",
        spouseDependent: "Coniuge a carico",
        child1: "1 Figlio a carico",
        children2: "2 Figli a carico",
        children3: "3+ Figli a carico",
        netYearlySalary: "Stipendio Netto Annuo",
        netMonthlySalary: "Stipendio Netto Mensile",
        deductionsDetail: "Dettaglio Trattenute",
        inpsContributions: "Contributi INPS (9.19%)",
        taxDeductions: "Detrazioni Fiscali",
        totalNetYearly: "Totale Netto Annuo",
        
        // Withholding Tax Calculator
        withholdingCalc: "Calcolo Ritenuta d'Acconto",
        withholdingCalcDesc: "Calcola la ritenuta del 20% per professionisti",
        
        // TFR Calculator
        tfrCalc: "Calcolo TFR",
        tfrCalcDesc: "Calcola il tuo Trattamento di Fine Rapporto maturato",
        
        // Tax Calculator
        taxCalc: "Calcolo Tasse Partita IVA",
        taxCalcDesc: "Confronta Regime Forfettario e Ordinario",
        
        // QR Generator
        qrGenerator: "Generatore QR Code",
        qrGeneratorDesc: "Crea codici QR gratuiti per qualsiasi scopo"
    },
    
    en: {
        // Header & Navigation
        home: "Home",
        features: "Features",
        tools: "Tools",
        login: "Sign In",
        register: "Sign Up",
        logout: "Logout",
        
        // Common
        calculate: "Calculate",
        reset: "Reset",
        copyResults: "Copy Results",
        copied: "Copied!",
        download: "Download",
        
        // Salary Calculator
        salaryCalc: "Net Salary Calculator",
        salaryCalcDesc: "Find out what you'll actually earn after deductions",
        grossSalaryLabel: "Gross Annual Salary (€)",
        grossSalaryHint: "RAL (Gross Annual Salary)",
        familyDeductions: "Family Deductions",
        noDeductions: "None (Single)",
        spouseDependent: "Dependent Spouse",
        child1: "1 Dependent Child",
        children2: "2 Dependent Children",
        children3: "3+ Dependent Children",
        netYearlySalary: "Net Annual Salary",
        netMonthlySalary: "Net Monthly Salary",
        deductionsDetail: "Deductions Detail",
        inpsContributions: "INPS Contributions (9.19%)",
        taxDeductions: "Tax Deductions",
        totalNetYearly: "Total Net Annual",
        
        // Withholding Tax Calculator
        withholdingCalc: "Withholding Tax Calculator",
        withholdingCalcDesc: "Calculate 20% withholding tax for professionals",
        
        // TFR Calculator
        tfrCalc: "Severance Pay Calculator",
        tfrCalcDesc: "Calculate your accrued severance pay",
        
        // Tax Calculator
        taxCalc: "VAT Tax Calculator",
        taxCalcDesc: "Compare flat rate vs standard regime",
        
        // QR Generator
        qrGenerator: "QR Code Generator",
        qrGeneratorDesc: "Create free QR codes for any purpose"
    },
    
    de: {
        // Header & Navigation
        home: "Startseite",
        features: "Funktionen",
        tools: "Werkzeuge",
        login: "Anmelden",
        register: "Registrieren",
        logout: "Abmelden",
        
        // Common
        calculate: "Berechnen",
        reset: "Zurücksetzen",
        copyResults: "Ergebnisse Kopieren",
        copied: "Kopiert!",
        download: "Herunterladen",
        
        // Salary Calculator
        salaryCalc: "Nettogehaltsrechner",
        salaryCalcDesc: "Finden Sie Ihr tatsächliches Nettogehalt heraus",
        grossSalaryLabel: "Bruttojahresgehalt (€)",
        grossSalaryHint: "RAL (Bruttojahresgehalt)",
        familyDeductions: "Familienabzüge",
        noDeductions: "Keine (Ledig)",
        spouseDependent: "Unterhaltsberechtigter Ehegatte",
        child1: "1 Unterhaltsberechtigtes Kind",
        children2: "2 Unterhaltsberechtigte Kinder",
        children3: "3+ Unterhaltsberechtigte Kinder",
        netYearlySalary: "Nettojahresgehalt",
        netMonthlySalary: "Nettomonatsgehalt",
        deductionsDetail: "Abzüge Detail",
        inpsContributions: "INPS Beiträge (9.19%)",
        taxDeductions: "Steuerabzüge",
        totalNetYearly: "Gesamt Netto Jährlich",
        
        // Withholding Tax Calculator
        withholdingCalc: "Quellensteuer-Rechner",
        withholdingCalcDesc: "Berechnen Sie 20% Quellensteuer für Freiberufler",
        
        // TFR Calculator
        tfrCalc: "Abfindungsrechner",
        tfrCalcDesc: "Berechnen Sie Ihre aufgelaufene Abfindung",
        
        // Tax Calculator
        taxCalc: "Steuerrechner",
        taxCalcDesc: "Vergleichen Sie Pauschal- und Ordentliches Regime",
        
        // QR Generator
        qrGenerator: "QR-Code-Generator",
        qrGeneratorDesc: "Erstellen Sie kostenlose QR-Codes"
    },
    
    fr: {
        // Header & Navigation
        home: "Accueil",
        features: "Fonctionnalités",
        tools: "Outils",
        login: "Se Connecter",
        register: "S'inscrire",
        logout: "Déconnexion",
        
        // Common
        calculate: "Calculer",
        reset: "Réinitialiser",
        copyResults: "Copier Résultats",
        copied: "Copié!",
        download: "Télécharger",
        
        // Salary Calculator
        salaryCalc: "Calculateur Salaire Net",
        salaryCalcDesc: "Découvrez ce que vous gagnerez réellement",
        grossSalaryLabel: "Salaire Brut Annuel (€)",
        grossSalaryHint: "RAL (Salaire Brut Annuel)",
        familyDeductions: "Déductions Familiales",
        noDeductions: "Aucune (Célibataire)",
        spouseDependent: "Conjoint à Charge",
        child1: "1 Enfant à Charge",
        children2: "2 Enfants à Charge",
        children3: "3+ Enfants à Charge",
        netYearlySalary: "Salaire Net Annuel",
        netMonthlySalary: "Salaire Net Mensuel",
        deductionsDetail: "Détail Déductions",
        inpsContributions: "Cotisations INPS (9.19%)",
        taxDeductions: "Déductions Fiscales",
        totalNetYearly: "Total Net Annuel",
        
        // Withholding Tax Calculator
        withholdingCalc: "Calculateur Retenue à la Source",
        withholdingCalcDesc: "Calculez 20% retenue pour professionnels",
        
        // TFR Calculator
        tfrCalc: "Calculateur Indemnité",
        tfrCalcDesc: "Calculez votre indemnité accumulée",
        
        // Tax Calculator
        taxCalc: "Calculateur Impôts",
        taxCalcDesc: "Comparez Régime Forfaitaire et Ordinaire",
        
        // QR Generator
        qrGenerator: "Générateur Code QR",
        qrGeneratorDesc: "Créez des codes QR gratuits"
    },
    
    es: {
        // Header & Navigation
        home: "Inicio",
        features: "Características",
        tools: "Herramientas",
        login: "Iniciar Sesión",
        register: "Registrarse",
        logout: "Cerrar Sesión",
        
        // Common
        calculate: "Calcular",
        reset: "Restablecer",
        copyResults: "Copiar Resultados",
        copied: "¡Copiado!",
        download: "Descargar",
        
        // Salary Calculator
        salaryCalc: "Calculadora Salario Neto",
        salaryCalcDesc: "Descubre lo que ganarás realmente",
        grossSalaryLabel: "Salario Bruto Anual (€)",
        grossSalaryHint: "RAL (Salario Bruto Anual)",
        familyDeductions: "Deducciones Familiares",
        noDeductions: "Ninguna (Soltero)",
        spouseDependent: "Cónyuge a Cargo",
        child1: "1 Hijo a Cargo",
        children2: "2 Hijos a Cargo",
        children3: "3+ Hijos a Cargo",
        netYearlySalary: "Salario Neto Anual",
        netMonthlySalary: "Salario Neto Mensual",
        deductionsDetail: "Detalle Deducciones",
        inpsContributions: "Contribuciones INPS (9.19%)",
        taxDeductions: "Deducciones Fiscales",
        totalNetYearly: "Total Neto Anual",
        
        // Withholding Tax Calculator
        withholdingCalc: "Calculadora Retención IRPF",
        withholdingCalcDesc: "Calcula 20% retención para profesionales",
        
        // TFR Calculator
        tfrCalc: "Calculadora Indemnización",
        tfrCalcDesc: "Calcula tu indemnización acumulada",
        
        // Tax Calculator
        taxCalc: "Calculadora Impuestos",
        taxCalcDesc: "Compara Régimen Forfetario y Ordinario",
        
        // QR Generator
        qrGenerator: "Generador Código QR",
        qrGeneratorDesc: "Crea códigos QR gratis"
    }
};

// LANGUAGE DETECTION AND MANAGEMENT
let currentLanguage = 'it';

function detectLanguage() {
    const saved = localStorage.getItem('preferredLanguage');
    if (saved && TRANSLATIONS[saved]) {
        return saved;
    }
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0].toLowerCase();
    if (TRANSLATIONS[langCode]) {
        return langCode;
    }
    return browserLang.startsWith('it') ? 'it' : 'en';
}

function setLanguage(lang) {
    if (!TRANSLATIONS[lang]) {
        console.warn('Language not supported:', lang);
        return;
    }
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (TRANSLATIONS[lang][key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = TRANSLATIONS[lang][key];
            } else {
                element.textContent = TRANSLATIONS[lang][key];
            }
        }
    });
    
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-blue-600', 'text-white');
        btn.classList.add('text-gray-700');
    });
    const activeBtn = document.querySelector(`[data-lang="${lang}"]`);
    if (activeBtn) {
        activeBtn.classList.add('active', 'bg-blue-600', 'text-white');
        activeBtn.classList.remove('text-gray-700');
    }
    console.log('✅ Language set to:', lang);
}

function t(key) {
    return TRANSLATIONS[currentLanguage][key] || key;
}

document.addEventListener('DOMContentLoaded', function() {
    currentLanguage = detectLanguage();
    setLanguage(currentLanguage);
});

console.log('✅ i18n system loaded');
