// SISTEMA I18N COMPLETO - TUTTE LE LINGUE CON TRADUZIONI SEO COMPLETE
const TRANSLATIONS = {
    it: {
        // [RESTO IDENTICO AL FILE ORIGINALE - OMESSO PER BREVITÀ]
        home: "Home",
        features: "Servizi",
        tools: "Calcolatori",
        aboutUs: "Chi Siamo",
        login: "Accedi",
        register: "Registrati",
        logout: "Esci",
        dashboard: "Dashboard",
        heroTitle: "Strumenti Gratuiti per il Tuo Business",
        heroSubtitle: "Calcolatori, generatori di documenti e molto altro. Tutto gratis.",
        heroDescription: "Servizi Business offre strumenti professionali per il calcolo di IVA, ritenuta d'acconto, stipendio netto e TFR. Crea fatture elettroniche e preventivi in PDF. Tutti gli strumenti essenziali per freelance, partite IVA e piccole imprese in un unico posto.",
        ctaStart: "Inizia Subito",
        ctaLearnMore: "Scopri di Più",
        seoIntroTitle: "Strumenti Business Online: Semplifica la Gestione della Tua Attività",
        seoIntroPara1: "Benvenuto su <strong>Servizi Business</strong>, la piattaforma che raccoglie tutti gli strumenti essenziali per gestire la tua attività professionale. Che tu sia un <strong>freelance</strong>, una <strong>partita IVA</strong> o una <strong>piccola impresa</strong>, troverai calcolatori gratuiti e generatori di documenti professionali per risparmiare tempo e denaro.",
        seoWhoIsThisFor: "Per Chi Sono Questi Strumenti?",
        seoTargetFreelance: "<strong>Liberi professionisti:</strong> calcola ritenute d'acconto, IVA e crea fatture professionali",
        seoTargetVAT: "<strong>Partite IVA:</strong> gestisci tasse, preventivi e documenti fiscali",
        seoTargetBusiness: "<strong>Piccole imprese:</strong> strumenti per fatturazione, calcoli fiscali e corrispettivi",
        seoTargetEmployee: "<strong>Dipendenti:</strong> calcola il tuo stipendio netto e il TFR maturato",
        seoTargetAccountant: "<strong>Commercialisti:</strong> velocizza i calcoli per i tuoi clienti",
        seoWhyChooseUs: "Perché Scegliere Servizi Business?",
        seoFeature1Title: "100% Gratuito",
        seoFeature1Desc: "Tutti gli strumenti base sono completamente gratuiti, senza costi nascosti.",
        seoFeature2Title: "Veloce e Facile",
        seoFeature2Desc: "Risultati istantanei senza bisogno di registrazione per i calcolatori base.",
        seoFeature3Title: "Sicuro e GDPR",
        seoFeature3Desc: "I tuoi dati sono protetti e trattati nel rispetto della normativa europea.",
        statsTools: "Strumenti Gratuiti",
        statsFree: "Gratis Forever",
        statsAvailable: "Sempre Disponibile",
        freeTools: "Calcolatori Gratuiti",
        freeToolsDesc: "Senza registrazione. Usa subito i nostri calcolatori!",
        ivaCalc: "Calcolo IVA",
        ivaCalcDesc: "Calcola velocemente l'IVA su qualsiasi importo.",
        salaryCalc: "Calcolo Stipendio Netto",
        salaryCalcDesc: "Scopri quanto guadagnerai effettivamente.",
        withholdingCalc: "Calcolo Ritenuta d'Acconto",
        withholdingCalcDesc: "Calcola la ritenuta per professionisti.",
        tfrCalc: "Calcolo TFR",
        tfrCalcDesc: "Calcola il tuo TFR maturato.",
        taxCalc: "Calcolo Tasse P.IVA",
        taxCalcDesc: "Calcola le tasse da pagare.",
        qrGenerator: "Generatore QR Code",
        qrGeneratorDesc: "Crea codici QR gratuiti.",
        corrispettiviCalc: "Corrispettivi Online",
        corrispettiviCalcDesc: "Gestisci le vendite giornaliere con calcolo IVA automatico.",
        imgToPdfConverter: "Converti Immagini in PDF",
        imgToPdfConverterDesc: "Trasforma PNG, JPG, WebP in PDF professionale.",
        useNow: "Usa ora",
        testimonialsTitle: "Cosa Dicono i Nostri Utenti",
        testimonialsSubtitle: "Migliaia di professionisti si fidano dei nostri strumenti ogni giorno.",
        testimonial1Text: "Il generatore di fatture mi ha salvato la vita! Semplice, veloce e professionale.",
        testimonial1Name: "Marco Rossi",
        testimonial1Role: "Graphic Designer",
        testimonial2Text: "Finalmente un sito che raccoglie tutti gli strumenti utili in un unico posto.",
        testimonial2Name: "Giulia Bianchi",
        testimonial2Role: "Impiegata",
        testimonial3Text: "Il tempo è denaro. Servizi Business mi permette di calcolare tutto al volo.",
        testimonial3Name: "Andrea Ferri",
        testimonial3Role: "Imprenditore",
        premiumServices: "Servizi Avanzati",
        premiumDesc: "Crea fatture e preventivi professionali",
        invoiceGenTitle: "Generatore Fatture",
        invoiceGenDesc: "Crea fatture professionali in PDF.",
        invoiceFeature1: "PDF professionale",
        invoiceFeature2: "Multi-valuta",
        invoiceFeature3: "Tutti i paesi",
        createInvoiceFree: "Crea Fattura - Gratis",
        quoteGenTitle: "Generatore Preventivi",
        quoteGenDesc: "Crea preventivi professionali in PDF.",
        quoteFeature1: "PDF professionale",
        quoteFeature2: "Validità personalizzabile",
        quoteFeature3: "Tutti i paesi",
        createQuoteFree: "Crea Preventivo - Gratis",
        ctaTitle: "Pronto a Semplificare il Tuo Lavoro?",
        ctaSubtitle: "Inizia subito ad usare i nostri strumenti gratuiti!",
        ctaButton: "Esplora i Calcolatori",
        footerTagline: "Strumenti gratuiti per professionisti.",
        usefulLinks: "Link Utili",
        calculators: "Calcolatori",
        services: "Servizi",
        contacts: "Contatti",
        allRightsReserved: "Tutti i diritti riservati",
        privacy: "Privacy Policy",
        terms: "Termini di Servizio",
        calculate: "Calcola",
        clear: "Pulisci",
        download: "Scarica",
        save: "Salva",
        cancel: "Annulla",
        confirm: "Conferma",
        back: "Indietro",
        next: "Avanti",
        loading: "Caricamento...",
        error: "Errore",
        success: "Successo",
        warning: "Attenzione",
        info: "Info",
        nav: {
            home: "Home",
            tools: "Strumenti",
            blog: "Blog"
        }
    },
    
    hu: {
        home: "Főoldal",
        features: "Szolgáltatások",
        tools: "Eszközök",
        aboutUs: "Rólunk",
        login: "Bejelentkezés",
        register: "Regisztráció",
        logout: "Kijelentkezés",
        dashboard: "Irányítópult",
        
        heroTitle: "Ingyenes Eszközök az Ön Vállalkozásához",
        heroSubtitle: "Számológépek, dokumentumgenerátorok és még sok más. Minden ingyen.",
        heroDescription: "A Servizi Business professzionális eszközöket kínál ÁFA, adóelőleg, nettó fizetés és végkielégítés számításához. Hozzon létre elektronikus számlákat és árajánlatokat PDF formátumban. Minden lényeges eszköz szabadúszók, egyéni vállalkozók és kisvállalatok számára egy helyen.",
        ctaStart: "Kezdjünk Neki",
        ctaLearnMore: "Tudjon Meg Többet",
        
        // SEO Section - MANCAVANO QUESTE!
        seoIntroTitle: "Online Üzleti Eszközök: Egyszerűsítse Vállalkozásának Kezelését",
        seoIntroPara1: "Üdvözöljük a <strong>Servizi Business</strong> oldalán, amely összegyűjti az összes lényeges eszközt vállalkozása kezeléséhez. Akár <strong>szabadúszó</strong>, <strong>egyéni vállalkozó</strong> vagy <strong>kisvállalat</strong>, ingyenes számológépeket és professzionális dokumentumgenerátorokat talál az idő és pénz megtakarítására.",
        seoWhoIsThisFor: "Kinek Szólnak Ezek az Eszközök?",
        seoTargetFreelance: "<strong>Szabadúszók:</strong> számítsa ki az adóelőleget, ÁFÁ-t és hozzon létre professzionális számlákat",
        seoTargetVAT: "<strong>Egyéni vállalkozók:</strong> kezelje az adókat, árajánlatokat és adódokumentumokat",
        seoTargetBusiness: "<strong>Kisvállalatok:</strong> eszközök számlázáshoz, adószámításhoz és napi eladásokhoz",
        seoTargetEmployee: "<strong>Alkalmazottak:</strong> számítsa ki nettó fizetését és végkielégítését",
        seoTargetAccountant: "<strong>Könyvelők:</strong> gyorsítsa fel az ügyfelei számításait",
        seoWhyChooseUs: "Miért Válassza a Servizi Business-t?",
        seoFeature1Title: "100% Ingyenes",
        seoFeature1Desc: "Minden alapeszköz teljesen ingyenes, nincsenek rejtett költségek.",
        seoFeature2Title: "Gyors és Egyszerű",
        seoFeature2Desc: "Azonnali eredmények regisztráció nélkül az alapszámológépekhez.",
        seoFeature3Title: "Biztonságos és GDPR",
        seoFeature3Desc: "Az Ön adatai védve vannak és az európai előírásoknak megfelelően kerülnek kezelésre.",
        
        statsTools: "Ingyenes Eszközök",
        statsFree: "Örökre Ingyenes",
        statsAvailable: "Mindig Elérhető",
        
        freeTools: "Ingyenes Számológépek",
        freeToolsDesc: "Nincs szükség regisztrációra. Használja eszközeinket most!",
        ivaCalc: "ÁFA Számológép",
        ivaCalcDesc: "Gyorsan számítsa ki az ÁFÁ-t bármely összegre.",
        salaryCalc: "Nettó Fizetés Számológép",
        salaryCalcDesc: "Tudja meg, mennyit fog ténylegesen keresni.",
        withholdingCalc: "Adóelőleg Számológép",
        withholdingCalcDesc: "Számítsa ki az adóelőleget szakemberek számára.",
        tfrCalc: "Végkielégítés Számológép",
        tfrCalcDesc: "Számítsa ki felhalmozott végkielégítését.",
        taxCalc: "Adószámító",
        taxCalcDesc: "Számítsa ki a fizetendő adókat.",
        qrGenerator: "QR Kód Generátor",
        qrGeneratorDesc: "Hozzon létre ingyenes QR kódokat.",
        corrispettiviCalc: "Napi Eladások",
        corrispettiviCalcDesc: "Kezelje a napi eladásokat automatikus ÁFA számítással.",
        imgToPdfConverter: "Képek Konvertálása PDF-be",
        imgToPdfConverterDesc: "Alakítson át PNG, JPG, WebP fájlokat professzionális PDF-é.",
        useNow: "Használja most",
        
        testimonialsTitle: "Mit Mondanak Felhasználóink",
        testimonialsSubtitle: "Szakemberek ezrei bíznak eszközeinkben minden nap.",
        testimonial1Text: "A számlakészítő megmentette az életemet! Egyszerű, gyors és professzionális.",
        testimonial1Name: "Marco Rossi",
        testimonial1Role: "Grafikus Tervező",
        testimonial2Text: "Végre egy oldal, amely egy helyen gyűjti össze az összes hasznos eszközt.",
        testimonial2Name: "Giulia Bianchi",
        testimonial2Role: "Alkalmazott",
        testimonial3Text: "Az idő pénz. A Servizi Business lehetővé teszi, hogy mindent gyorsan kiszámoljak.",
        testimonial3Name: "Andrea Ferri",
        testimonial3Role: "Vállalkozó",
        
        premiumServices: "Fejlett Szolgáltatások",
        premiumDesc: "Hozzon létre professzionális számlákat és árajánlatokat",
        invoiceGenTitle: "Számlakészítő",
        invoiceGenDesc: "Hozzon létre professzionális PDF számlákat.",
        invoiceFeature1: "Professzionális PDF",
        invoiceFeature2: "Többvalutás",
        invoiceFeature3: "Minden ország",
        createInvoiceFree: "Számla Létrehozása - Ingyenes",
        quoteGenTitle: "Árajánlatkészítő",
        quoteGenDesc: "Hozzon létre professzionális PDF árajánlatokat.",
        quoteFeature1: "Professzionális PDF",
        quoteFeature2: "Testreszabható érvényesség",
        quoteFeature3: "Minden ország",
        createQuoteFree: "Árajánlat Létrehozása - Ingyenes",
        
        ctaTitle: "Készen Áll a Munka Egyszerűsítésére?",
        ctaSubtitle: "Kezdje el használni ingyenes eszközeinket most!",
        ctaButton: "Számológépek Felfedezése",
        
        footerTagline: "Ingyenes eszközök szakembereknek.",
        usefulLinks: "Hasznos Linkek",
        calculators: "Számológépek",
        services: "Szolgáltatások",
        contacts: "Kapcsolat",
        allRightsReserved: "Minden jog fenntartva",
        privacy: "Adatvédelmi Irányelvek",
        terms: "Felhasználási Feltételek",
        
        calculate: "Számítás",
        clear: "Törlés",
        download: "Letöltés",
        save: "Mentés",
        cancel: "Mégse",
        confirm: "Megerősítés",
        back: "Vissza",
        next: "Következő",
        loading: "Betöltés...",
        error: "Hiba",
        success: "Sikeres",
        warning: "Figyelmeztetés",
        info: "Információ",
        
        nav: {
            home: "Főoldal",
            tools: "Eszközök",
            blog: "Blog"
        }
    }
};

// [RESTO DEL CODICE IDENTICO]
let currentLanguage = 'it';

function detectLanguage() {
    const saved = localStorage.getItem('preferredLanguage');
    if (saved && TRANSLATIONS[saved]) return saved;
    
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0].toLowerCase();
    
    if (TRANSLATIONS[langCode]) return langCode;
    return browserLang.startsWith('it') ? 'it' : 'en';
}

function setLanguage(lang) {
    if (!TRANSLATIONS[lang]) {
        console.warn('Language not supported:', lang);
        return;
    }
    
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);
    
    // Traduci tutti gli elementi con data-i18n
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = getNestedTranslation(TRANSLATIONS[lang], key);
        
        if (translation) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translation;
            } else {
                // Usa innerHTML per supportare HTML nei testi tradotti
                if (translation.includes('<strong>')) {
                    element.innerHTML = translation;
                } else {
                    updateElementText(element, translation);
                }
            }
        }
    });
    
    // Traduci placeholder
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        const translation = getNestedTranslation(TRANSLATIONS[lang], key);
        if (translation) {
            element.placeholder = translation;
        }
    });
    
    // Aggiorna pulsanti lingua
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-blue-600', 'text-white', 'border-blue-500');
        btn.classList.add('text-gray-700');
    });
    const activeBtn = document.querySelector(`[data-lang="${lang}"]`);
    if (activeBtn) {
        activeBtn.classList.add('active', 'bg-blue-600', 'text-white', 'border-blue-500');
        activeBtn.classList.remove('text-gray-700');
    }
    
    console.log('✅ Language set to:', lang);
}

function getNestedTranslation(obj, path) {
    const keys = path.split('.');
    let result = obj;
    
    for (const key of keys) {
        if (result && typeof result === 'object' && key in result) {
            result = result[key];
        } else {
            return null;
        }
    }
    
    return result;
}

function updateElementText(element, newText) {
    const textSpan = element.querySelector('span[data-i18n], [data-i18n]');
    
    if (textSpan && textSpan !== element) {
        textSpan.textContent = newText;
    } else if (element.childNodes.length === 1 && element.childNodes[0].nodeType === 3) {
        element.textContent = newText;
    } else {
        for (let node of element.childNodes) {
            if (node.nodeType === 3 && node.textContent.trim()) {
                node.textContent = newText;
                return;
            }
        }
        element.textContent = newText;
    }
}

function t(key) {
    return getNestedTranslation(TRANSLATIONS[currentLanguage], key) || key;
}

document.addEventListener('DOMContentLoaded', function() {
    currentLanguage = detectLanguage();
    setLanguage(currentLanguage);
});

console.log('✅ i18n system loaded with COMPLETE translations for 6 languages');